System.register("chunks:///_virtual/%E4%BB%A3%E7%A0%81.js",["./cjs-loader.mjs"],(function(i,t){var e;return{setters:[function(i){e=i.default}],execute:function(){i("default",void 0);var r=i("__cjsMetaURL",t.meta.url);e.define(r,(function(t,e,r,l,s){var a,o={gameWidth:800,gameHeight:1300,tileSize:100,fieldSize:8,colors:[16711680,65280,255,16776960]};window.onload=function(){(a=new Phaser.Game(o.gameWidth,o.gameHeight)).state.add("TheGame",h),a.state.start("TheGame")};var h=function(){};h.prototype={preload:function(){a.stage.backgroundColor=2236962,a.load.spritesheet("tiles","assets/sprites/tiles.png",o.tileSize,o.tileSize),a.load.image("rotate","assets/sprites/rotate.png")},create:function(){a.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,a.scale.pageAlignHorizontally=!0,a.scale.pageAlignVertically=!0,this.createLevel()},createLevel:function(){this.canPick=!0,this.tilesArray=[],this.tileGroup=a.add.group();for(var i=[],t=0;t<o.fieldSize;t++){this.tilesArray[t]=[];for(var e=0;e<o.fieldSize;e++)this.addTile(t,e),i.push(new Phaser.Point(e,t))}heroLocation=Phaser.ArrayUtils.removeRandomItem(i),this.tilesArray[heroLocation.y][heroLocation.x].tileSprite.frame=1,this.tilesArray[heroLocation.y][heroLocation.x].value=11,this.tilesArray[heroLocation.y][heroLocation.x].tileSprite.tint=16777215;do{var r=Phaser.ArrayUtils.removeRandomItem(i)}while(this.isAdjacent(heroLocation,r));this.tilesArray[r.y][r.x].tileSprite.frame=2,this.tilesArray[r.y][r.x].value=12,this.tilesArray[r.y][r.x].tileSprite.tint=16777215;do{var l=Phaser.ArrayUtils.removeRandomItem(i)}while(this.isAdjacent(heroLocation,l));this.tilesArray[l.y][l.x].tileSprite.frame=3,this.tilesArray[l.y][l.x].value=13,this.tilesArray[l.y][l.x].tileSprite.tint=16777215;var s=o.tileSize*o.fieldSize;this.tileGroup.x=(a.width-s)/2,this.tileGroup.y=(a.height-s)/2,this.tileGroup.pivot.set(s/2,s/2),this.tileGroup.position.set(this.tileGroup.x+this.tileGroup.pivot.x,this.tileGroup.y+this.tileGroup.pivot.y),this.tileMask=a.add.graphics(this.tileGroup.x-this.tileGroup.pivot.x,this.tileGroup.y-this.tileGroup.pivot.y),this.tileMask.beginFill(16777215),this.tileMask.drawRect(0,0,s,s),this.tileGroup.mask=this.tileMask,this.tileMask.visible=!1,this.rotateLeft=a.add.button(a.width/4,this.tileGroup.y+s/2+.5*o.tileSize,"rotate",(function(){this.rotateField(-90)}),this),this.rotateLeft.anchor.set(.5,0),this.rotateRight=a.add.button(a.width/4*3,this.tileGroup.y+s/2+.5*o.tileSize,"rotate",(function(){this.rotateField(90)}),this),this.rotateRight.anchor.set(.5,0),this.rotateRight.scale.x*=-1,this.tilePool=[],a.input.onDown.add(this.pickTile,this)},addTile:function(i,t){var e=t*o.tileSize+o.tileSize/2,r=i*o.tileSize+o.tileSize/2,l=a.add.sprite(e,r,"tiles");l.anchor.set(.5),l.width=o.tileSize,l.height=o.tileSize;var s=a.rnd.integerInRange(0,o.colors.length-1);l.tint=o.colors[s],this.tilesArray[i][t]={tileSprite:l,isEmpty:!1,coordinate:new Phaser.Point(t,i),value:s},this.tileGroup.add(l)},pickTile:function(i){if(this.canPick){var t=i.x-this.tileGroup.x+o.tileSize*o.fieldSize/2,e=i.y-this.tileGroup.y+o.tileSize*o.fieldSize/2,r=Math.floor(e/o.tileSize),l=Math.floor(t/o.tileSize);if(r>=0&&l>=0&&r<o.fieldSize&&l<o.fieldSize){var s=this.tilesArray[r][l];this.filled=[],this.filled.length=0,this.floodFill(s.coordinate,s.value),this.filled.length>1&&(this.canPick=!1,this.destroyTiles())}}},destroyTiles:function(){do{var i=this.filled.shift(),t=a.add.tween(this.tilesArray[i.y][i.x].tileSprite).to({alpha:0},300,Phaser.Easing.Linear.None,!0);this.tilePool.push(this.tilesArray[i.y][i.x].tileSprite),t.onComplete.add((function(i){i.frame=0,1==t.manager.getAll().length&&this.fillVerticalHoles()}),this),this.tilesArray[i.y][i.x].isEmpty=!0}while(this.filled.length>0)},fillVerticalHoles:function(){for(var i=!1,t=o.fieldSize-2;t>=0;t--)for(var e=0;e<o.fieldSize;e++)if(!this.tilesArray[t][e].isEmpty){var r=this.countSpacesBelow(t,e);r&&(i=!0,this.moveDownTile(t,e,t+r,!1))}for(i||this.endMove(),t=0;t<o.fieldSize;t++){var l=this.countSpacesBelow(-1,t);for(e=l-1;e>=0;e--){var s=this.tilePool.shift();s.y=(e-l)*o.tileSize+o.tileSize/2,s.x=t*o.tileSize+o.tileSize/2,s.alpha=1;var h=a.rnd.integerInRange(0,o.colors.length-1);s.tint=o.colors[h],this.tilesArray[e][t]={tileSprite:s,isEmpty:!1,coordinate:new Phaser.Point(t,e),value:h},this.moveDownTile(0,t,e,!0)}}},countSpacesBelow:function(i,t){for(var e=0,r=i+1;r<o.fieldSize;r++)this.tilesArray[r][t].isEmpty&&e++;return e},moveDownTile:function(i,t,e,r){if(!r){var l=this.tilesArray[i][t].tileSprite,s=this.tilesArray[i][t].value;this.tilesArray[e][t]={tileSprite:l,isEmpty:!1,coordinate:new Phaser.Point(t,e),value:s},this.tilesArray[i][t].isEmpty=!0}var h=e*o.tileSize+o.tileSize/2-this.tilesArray[e][t].tileSprite.y,n=a.add.tween(this.tilesArray[e][t].tileSprite).to({y:e*o.tileSize+o.tileSize/2},h/2,Phaser.Easing.Linear.None,!0);n.onComplete.add((function(){1==n.manager.getAll().length&&this.endMove()}),this)},tilesInColumn:function(i){for(var t=0,e=0;e<o.fieldSize;e++)this.tilesArray[e][i].isEmpty||t++;return t},rotateField:function(i){this.canPick&&(this.canPick=!1,this.tileGroup.mask=null,a.add.tween(this.tileGroup).to({angle:i},500,Phaser.Easing.Bounce.Out,!0).onComplete.add((function(){this.tilesArray=Phaser.ArrayUtils.rotateMatrix(this.tilesArray,-i);for(var t=0;t<o.fieldSize;t++)for(var e=0;e<o.fieldSize;e++)this.tilesArray[t][e].tileSprite.angle=0,this.tilesArray[t][e].tileSprite.x=e*o.tileSize+o.tileSize/2,this.tilesArray[t][e].tileSprite.y=t*o.tileSize+o.tileSize/2,this.tilesArray[t][e].coordinate=new Phaser.Point(e,t);this.tileGroup.angle=0,this.endMove(),this.tileGroup.mask=this.tileMask}),this))},endMove:function(){this.filled=[];for(var i=0;i<o.fieldSize;i++)for(var t=0;t<o.fieldSize;t++){if(11==this.tilesArray[i][t].value)if(i!=o.fieldSize-1)switch(this.tilesArray[i+1][t].value){case 12:this.filled.push(new Phaser.Point(t,i+1));var e=this.findItem(3);e.tileSprite.frame=4,e.value=14;break;case 14:this.filled.push(new Phaser.Point(t,i))}}this.filled.length>0?this.destroyTiles():this.canPick=!0},findItem:function(i){for(var t=0;t<o.fieldSize;t++)for(var e=0;e<o.fieldSize;e++)if(this.tilesArray[t][e].value==10+i)return this.tilesArray[t][e]},isAdjacent:function(i,t){return Math.abs(i.x-t.x)<2&&Math.abs(i.y-t.y)<2},floodFill:function(i,t){i.x<0||i.y<0||i.x>=o.fieldSize||i.y>=o.fieldSize||this.tilesArray[i.y][i.x].isEmpty||this.tilesArray[i.y][i.x].value!=t||this.pointInArray(i)||(this.filled.push(i),this.floodFill(new Phaser.Point(i.x+1,i.y),t),this.floodFill(new Phaser.Point(i.x-1,i.y),t),this.floodFill(new Phaser.Point(i.x,i.y+1),t),this.floodFill(new Phaser.Point(i.x,i.y-1),t))},pointInArray:function(i){for(var t=0;t<this.filled.length;t++)if(this.filled[t].x==i.x&&this.filled[t].y==i.y)return!0;return!1}},i("default",r.exports)}),{})}}}));

System.register("chunks:///_virtual/%E6%8E%89%E4%B8%9C%E8%A5%BF%E4%BB%A3%E7%A0%81.js",["./cjs-loader.mjs"],(function(e,t){var u;return{setters:[function(e){u=e.default}],execute:function(){e("default",void 0);var n=e("__cjsMetaURL",t.meta.url);u.define(n,(function(t,u,n,r,s){e("default",n.exports)}),{})}}}));

System.register("chunks:///_virtual/ActionPoint.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameInstance.ts","./BuyActionPoint.ts"],(function(t){var n,e,i,o,a,r,c,s,l,u,P,f,p,A,y;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,c=t.Label,s=t.Prefab,l=t.EventTarget,u=t.instantiate,P=t.find,f=t.Vec3,p=t.Component},function(t){A=t.GameInstance},function(t){y=t.BuyActionPoint}],execute:function(){var b,h,m,v,d,g,L;a._RF.push({},"178batlZ7BKSJiUTJqrfV4n","ActionPoint",void 0);var B=r.ccclass,I=r.property;t("ActionPoint",(b=B("ActionPoint"),h=I({type:c,displayName:"体力显示Label"}),m=I({type:s,displayName:"购买体力弹窗UI"}),b((g=n((d=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return(n=t.call.apply(t,[this].concat(a))||this).GameInstanceRef=void 0,n.ActionPointEvent=new l,i(n,"APLabel",g,o(n)),i(n,"BuyActionPointPrefab",L,o(n)),n}e(n,t);var a=n.prototype;return a.OpenBuyAPWindow=function(){var t=this;console.log("打开体力购买弹窗");var n=u(this.BuyActionPointPrefab);n.getComponent(y).BuyActionPointEvent.on("BuyAP",(function(n){t.SetActionPointLabel(n)}),this),n.setParent(P("Canvas/UI")),n.setPosition(new f(0,0,0))},a.SetActionPointLabel=function(t){this.APLabel&&(this.ActionPointEvent.emit("NewAPSet",t),this.APLabel.string=0!=t?String(t)+"/15":"15:00+3")},a.start=function(){this.GameInstanceRef=this.node.getComponent(A),this.GameInstanceRef.LoadData(),this.SetActionPointLabel(this.GameInstanceRef.GameData.ActionPoint)},a.update=function(t){},n}(p)).prototype,"APLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=n(d.prototype,"BuyActionPointPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=d))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/ActiveStore.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,a,o,c,s,p,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,c=e.Prefab,s=e.instantiate,p=e.find,l=e.Vec3,u=e.Component}],execute:function(){var f,v,b,y,h;a._RF.push({},"a818faX99hFZqp9bcVbICBr","ActiveStore",void 0);var P=o.ccclass,d=o.property;e("ActiveStore",(f=P("活跃奖励按钮"),v=d({type:c,displayName:"活跃奖励界面Prefab"}),f((h=t((y=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"ActiveStorePrefab",h,n(t)),t}r(t,e);var a=t.prototype;return a.OpenActiveStore=function(){var e=s(this.ActiveStorePrefab);e.setParent(p("Canvas/UI")),e.setPosition(new l(0,0,0))},a.start=function(){},a.update=function(e){},t}(u)).prototype,"ActiveStorePrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=y))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/Billboard.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var e,t,r,o,a,n,l,s,c,p;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,r=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){a=i.cclegacy,n=i._decorator,l=i.SpriteFrame,s=i.Node,c=i.Sprite,p=i.Component}],execute:function(){var d,u,B,h,f,y,I;a._RF.push({},"18e3fWjkT1NiphAKf5pilPU","Billboard",void 0);var _=n.ccclass,v=n.property;i("Billboard",(d=_("Billboard"),u=v({type:l,displayName:"排行榜图片组"}),B=v({type:s,displayName:"排行榜"}),d((y=e((f=function(i){function e(){for(var e,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return e=i.call.apply(i,[this].concat(a))||this,r(e,"Images",y,o(e)),r(e,"UI_Board",I,o(e)),e}t(e,i);var a=e.prototype;return a.ChooseBoard1=function(){this.OpenBillBoard(0)},a.ChooseBoard2=function(){this.OpenBillBoard(1)},a.ChooseBoard3=function(){this.OpenBillBoard(2)},a.ChooseBoard4=function(){this.OpenBillBoard(3)},a.OpenBillBoard=function(i){void 0===i&&(i=0),this.UI_Board&&(this.UI_Board.active=!0),this.UI_Board.children[1].getComponent(c).spriteFrame=this.Images[i]},a.OpenDetail=function(){1==this.UI_Board.active&&(this.UI_Board.children[4].active=!0)},a.start=function(){this.UI_Board&&(this.UI_Board.children[4].active=!1,this.UI_Board.active=!1)},a.update=function(i){},e}(p)).prototype,"Images",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=e(f.prototype,"UI_Board",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=f))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/Brick.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,n,o,a,c,s,p,u,l,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,c=t.JsonAsset,s=t.SpriteFrame,p=t.EventTarget,u=t.Sprite,l=t.Input,h=t.Component}],execute:function(){var y,d,f,k,m,B,v;o._RF.push({},"d7cb962HB9HSruXyoUJOL0W","Brick",void 0);var g=a.ccclass,C=a.property;t("Brick",(y=g("单个块"),d=C({type:c,displayName:"块数据JSON"}),f=C({type:s,displayName:"图片组"}),y((B=e((m=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).BrickEvent=new p,r(e,"BrickData",B,n(e)),r(e,"Images",v,n(e)),e.BrickType=0,e.CoordX=0,e.CoordY=0,e.Score=10,e.Coin=10,e}i(e,t);var o=e.prototype;return o.GetRandomNum=function(t,e){var i=e-t,r=Math.random();return t+Math.round(r*i)},o.OnMouseDown=function(t){this.BrickEvent.emit("Click",this.CoordX,this.CoordY,this.BrickType,this.Score,this.Coin)},o.SetBrickType=function(t){this.BrickType=t,this.node.getComponent(u).spriteFrame=this.Images[this.BrickType],this.Score=this.BrickData.json[t].Score,this.Coin=this.BrickData.json[t].Coin},o.start=function(){this.node.on(l.EventType.MOUSE_DOWN,this.OnMouseDown,this)},o.update=function(t){},e}(h)).prototype,"BrickData",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=e(m.prototype,"Images",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=m))||k));o._RF.pop()}}}));

System.register("chunks:///_virtual/BuyActionPoint.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameInstance.ts"],(function(t){var e,n,a,i,o,r,s,c,l,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.Node,c=t.EventTarget,l=t.Label,u=t.Component},function(t){p=t.GameInstance}],execute:function(){var d,f,h,m,G;o._RF.push({},"32782U74VhIWZHFwks2BEQF","BuyActionPoint",void 0);var y=r.ccclass,b=r.property;t("BuyActionPoint",(d=y("购买体力弹窗UI"),f=b({type:s,displayName:"元宝显示Label "}),d((G=e((m=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).BuyActionPointEvent=new c,a(e,"GoldLabel",G,i(e)),e.GameInstanceRef=null,e}n(e,t);var o=e.prototype;return o.UpdateGoldLabel=function(){this.GoldLabel&&(this.GoldLabel.getComponent(l).string=String(this.GameInstanceRef.GameData.Gold))},o.BuyActionPoint=function(){this.GameInstanceRef.GameData.Gold-=100,this.GameInstanceRef.GameData.ActionPoint+=5,this.BuyActionPointEvent.emit("BuyAP",this.GameInstanceRef.GameData.ActionPoint),this.UpdateGoldLabel(),this.GameInstanceRef.SaveData()},o.Quit=function(){this.node.removeFromParent(),this.node.destroy()},o.start=function(){this.GameInstanceRef=this.node.getComponent(p),this.UpdateGoldLabel()},o.update=function(t){},e}(u)).prototype,"GoldLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=m))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/ClosePop.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,e,n,r;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy,n=o._decorator,r=o.Component}],execute:function(){var s;e._RF.push({},"28bb5z3jYZF4KXYzmaCxrdY","ClosePop",void 0);var c=n.ccclass;n.property,o("ClosePop",c("关闭弹窗")(s=function(o){function e(){return o.apply(this,arguments)||this}t(e,o);var n=e.prototype;return n.ClosePop=function(){this.node.removeFromParent(),this.node.destroy()},n.start=function(){},n.update=function(o){},e}(r))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/Coin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameInstance.ts"],(function(n){var t,e,o,r,i,c;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n._decorator,r=n.Label,i=n.Component},function(n){c=n.GameInstance}],execute:function(){var a;e._RF.push({},"88f96KRJAJBno5+60K7adAA","Coin",void 0);var s=o.ccclass;o.property,n("Coin",s("新春纪念币UI显示")(a=function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var o=e.prototype;return o.start=function(){var n=this.node.getComponent(c).GameData.Coin;this.node.children[0].getComponent(r).string=String(n)},o.update=function(n){},e}(i))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/DeActivePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,n,c;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,c=t.Component}],execute:function(){var i;o._RF.push({},"64362P+5QxKsYVfevYxU6dI","DeActivePopup",void 0);var r=n.ccclass;n.property,t("DeActivePopup",r("禁用弹窗")(i=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var n=o.prototype;return n.DeActivePopup=function(){this.node.active=!1},n.start=function(){},n.update=function(t){},o}(c))||i);o._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/FloatItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,r,i,a,l,c,u,s,p,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,l=t.Node,c=t.Label,u=t.tween,s=t.Sprite,p=t.Vec3,f=t.Component}],execute:function(){var d,m,y,h,g,b,I;i._RF.push({},"9ac805npR5ILLjXJIke2sQb","FloatItem",void 0);var v=a.ccclass,N=a.property;t("FloatItem",(d=v("FloatItem"),m=N({type:l,displayName:"奖励icon"}),y=N({type:c,displayName:"数量Label"}),d((b=e((g=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,o(e,"Icon",b,r(e)),o(e,"Num",I,r(e)),e}n(e,t);var i=e.prototype;return i.SetScoreNum=function(t){this.Num.getComponent(c).string="+"+String(t)},i.start=function(){var t=this,e=this.node.getWorldPosition();u(this.node.getComponent(s).color).to(.4,{a:0}).call((function(){})).start(),u(this.node).to(.5,{worldPosition:new p(e.x,e.y+30,0)}).call((function(){t.node.destroy()})).start()},i.update=function(t){},e}(f)).prototype,"Icon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(g.prototype,"Num",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=g))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/Gamble.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameInstance.ts"],(function(e){var t,n,a,i,o,r,l,u,p,c,s,f,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,l=e.Node,u=e.Prefab,p=e.instantiate,c=e.find,s=e.Vec3,f=e.Component},function(e){m=e.GameInstance}],execute:function(){var d,b,y,P,N,h,g,v,B;o._RF.push({},"a7d32F48h1Cy7d/90vED1Yo","Gamble",void 0);var G=r.ccclass,I=r.property;e("Gamble",(d=G("抽奖界面"),b=I({type:l,displayName:"小盒子数量Node"}),y=I({type:l,displayName:"大盒子数量Node"}),P=I({type:u,displayName:"奖励弹窗Prefab"}),d((g=t((h=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).GameInstanceRef=null,a(t,"SmallBoxNumNode",g,i(t)),a(t,"BigBoxNumNode",v,i(t)),a(t,"PopupPrefab",B,i(t)),t}n(t,e);var o=t.prototype;return o.OpenPop=function(){if(this.PopupPrefab){var e=p(this.PopupPrefab);e.setParent(c("Canvas/UI")),e.setPosition(new s(0,0,0))}},o.start=function(){this.GameInstanceRef=this.node.getComponent(m)},o.update=function(e){},t}(f)).prototype,"SmallBoxNumNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(h.prototype,"BigBoxNumNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(h.prototype,"PopupPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=h))||N));o._RF.pop()}}}));

System.register("chunks:///_virtual/Game1Select.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameInstance.ts"],(function(e){var t,a,n,i,o,r,s,c,m,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Node,c=e.director,m=e.Component},function(e){l=e.GameInstance}],execute:function(){var f,u,p,G,d;o._RF.push({},"fef89mbROJH8YoPT2L03kmI","Game1Select",void 0);var h=r.ccclass,v=r.property;e("Game1Select",(f=h("阶段一选择快速场弹窗"),u=v({type:s,displayName:"快速场确认弹窗"}),f((d=t((G=function(e){function t(){for(var t,a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).GameInstanceRef=null,n(t,"FastConfirmNode",d,i(t)),t}a(t,e);var o=t.prototype;return o.EnterNormal=function(){this.GameInstanceRef.GameData.Game1_IsNormalGame=!0,this.GameInstanceRef.SaveData(),c.loadScene("01GameOne")},o.FastConfirm=function(){0==this.FastConfirmNode.active&&(this.FastConfirmNode.active=!0)},o.EnterFast=function(){this.GameInstanceRef.GameData.Game1_IsNormalGame=!1,this.GameInstanceRef.SaveData(),c.loadScene("01GameOne")},o.start=function(){this.GameInstanceRef=this.node.getComponent(l),this.FastConfirmNode.active=!1},o.update=function(e){},t}(m)).prototype,"FastConfirmNode",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=G))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/Game2Popup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,i,n,r,a,p,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,p=e.Node,l=e.Label,u=e.Component}],execute:function(){var c,d,s,f,N,y,g,m,h;r._RF.push({},"1efefdJcLdOiIWiZwAD6qXW","Game2Popup",void 0);var b=a.ccclass,v=a.property;e("Game2Popup",(c=b("二阶段结算弹窗"),d=v({type:p,displayName:"积分数量显示Node"}),s=v({type:p,displayName:"新春纪念币显示Node"}),f=v({type:p,displayName:"评级显示Node"}),c((g=t((y=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"ScoreNode",g,n(t)),i(t,"CoinNode",m,n(t)),i(t,"GradeNode",h,n(t)),t}o(t,e);var r=t.prototype;return r.Init=function(e,t,o){void 0===e&&(e=1),void 0===t&&(t=1),void 0===o&&(o=" "),this.ScoreNode&&this.CoinNode&&this.GradeNode&&(this.ScoreNode.getComponent(l).string="+"+String(e),this.CoinNode.getComponent(l).string="+"+String(t),this.GradeNode.getComponent(l).string=o)},r.start=function(){},r.update=function(e){},t}(u)).prototype,"ScoreNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(y.prototype,"CoinNode",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=t(y.prototype,"GradeNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=y))||N));r._RF.pop()}}}));

System.register("chunks:///_virtual/Game2Select.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameInstance.ts"],(function(e){var t,a,n,o,i,r,s,c,m,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,s=e.Node,c=e.director,m=e.Component},function(e){l=e.GameInstance}],execute:function(){var u,f,p,G,d;i._RF.push({},"a24b8o4uvxN8Iv9XMmsvXMV","Game2Select",void 0);var h=r.ccclass,v=r.property;e("Game2Select",(u=h("阶段二选择快速场弹窗"),f=v({type:s,displayName:"快速场确认弹窗"}),u((d=t((G=function(e){function t(){for(var t,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).GameInstanceRef=null,n(t,"FastConfirmNode",d,o(t)),t}a(t,e);var i=t.prototype;return i.EnterNormal=function(){this.GameInstanceRef.GameData.Game2_IsNormalGame=!0,this.GameInstanceRef.SaveData(),c.loadScene("02GameTwo")},i.FastConfirm=function(){0==this.FastConfirmNode.active&&(this.FastConfirmNode.active=!0)},i.EnterFast=function(){this.GameInstanceRef.GameData.Game2_IsNormalGame=!1,this.GameInstanceRef.SaveData(),c.loadScene("02GameTwo")},i.start=function(){this.GameInstanceRef=this.node.getComponent(l),this.FastConfirmNode.active=!1},i.update=function(e){},t}(m)).prototype,"FastConfirmNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=G))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/Game3Popup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,n,i,r,a,c,p,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,c=e.Node,p=e.Label,u=e.Component}],execute:function(){var l,s,d,f,y,N,g;r._RF.push({},"9cb0dj2WK5McaTKBO77ay4q","Game3Popup",void 0);var h=a.ccclass,m=a.property;e("Game3Popup",(l=h("三阶段结算弹窗"),s=m({type:c,displayName:"积分数量显示Node"}),d=m({type:c,displayName:"新春纪念币显示Node"}),l((N=t((y=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"ScoreNode",N,i(t)),n(t,"CoinNode",g,i(t)),t}o(t,e);var r=t.prototype;return r.Init=function(e,t){void 0===e&&(e=1),void 0===t&&(t=1),this.ScoreNode&&this.CoinNode&&(this.ScoreNode.getComponent(p).string="+"+String(e),this.CoinNode.getComponent(p).string="+"+String(t))},r.start=function(){},r.update=function(e){},t}(u)).prototype,"ScoreNode",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(y.prototype,"CoinNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=y))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/Game3Select.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameInstance.ts"],(function(e){var t,a,n,i,r,o,s,c,m,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,s=e.Node,c=e.director,m=e.Component},function(e){l=e.GameInstance}],execute:function(){var u,f,p,h,G;r._RF.push({},"98a63DTV7ZEj5rTuguIhYb2","Game3Select",void 0);var d=o.ccclass,v=o.property;e("Game3Select",(u=d("阶段三选择快速场弹窗"),f=v({type:s,displayName:"快速场确认弹窗"}),u((G=t((h=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).GameInstanceRef=null,n(t,"FastConfirmNode",G,i(t)),t}a(t,e);var r=t.prototype;return r.EnterNormal=function(){this.GameInstanceRef.GameData.Game3_IsNormalGame=!0,this.GameInstanceRef.SaveData(),c.loadScene("03GameThree")},r.FastConfirm=function(){0==this.FastConfirmNode.active&&(this.FastConfirmNode.active=!0)},r.EnterFast=function(){this.GameInstanceRef.GameData.Game3_IsNormalGame=!1,this.GameInstanceRef.SaveData(),c.loadScene("03GameThree")},r.start=function(){this.GameInstanceRef=this.node.getComponent(l),this.FastConfirmNode.active=!1},r.update=function(e){},t}(m)).prototype,"FastConfirmNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=h))||p));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameInstance.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(a){var e,t,n,o,r;return{setters:[function(a){e=a.inheritsLoose},function(a){t=a.cclegacy,n=a._decorator,o=a.sys,r=a.Component}],execute:function(){var m;t._RF.push({},"e69a1/406NPFLkLGk9mC+1B","GameInstance",void 0);var s=n.ccclass;n.property,a("GameInstance",s("游戏实例")(m=function(a){function t(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))||this).GameData={NeedInit:!0,Gold:666666,Score:0,MaxActionPoint:15,ActionPoint:15,Rank:0,Coin:0,ActivePoint:0,ActiveLevel:0,SilverHammer:0,GoldHammer:0,Game1_IsNormalGame:!0,Game1_Score:0,Game1_Rank:0,Game1_SilverHammer:0,Game1_NormalBrickTypes:[],Game1_FastBrickTypes:[],Game1_MonsterType:!0,Game2_IsNormalGame:!0,Game2_Score:0,Game2_Rank:0,Game2_SilverHammer:0,Game2_NormalCurrentLanternType:0,Game2_NormalLanternTypes:[],Game2_NormalLanternPositions:[],Game2_FastCurrentLanternType:0,Game2_FastLanternTypes:[],Game2_FastLanternPositions:[],Game3_IsNormalGame:!0,Game3_Score:0,Game3_Rank:0,Game3_SilverHammer:0,Game3_NormalTileState:[],Game3_NormalRightPath:[],Game3_NormalOtherPath:[],Game3_FastTileState:[],Game3_FastRightPath:[],Game3_FastOtherPath:[]},e}e(t,a);var n=t.prototype;return n.SaveData=function(){o.localStorage.setItem("GameData",JSON.stringify(this.GameData)),console.log("GameInstance保存游戏"),console.log(this.GameData)},n.LoadData=function(){return null!=o.localStorage.getItem("GameData")&&(this.GameData=JSON.parse(o.localStorage.getItem("GameData")),console.log("GameInstance读取游戏"),console.log(this.GameData),!0)},n.DeleteData=function(){},n.start=function(){null!=o.localStorage.getItem("GameData")&&this.LoadData()},n.update=function(a){},t}(r))||m);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameMode1.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Brick.ts","./GameInstance.ts","./Hit.ts","./ActionPoint.ts","./FloatItem.ts","./BuyActionPoint.ts","./ScoreProgressBar.ts"],(function(t){var e,i,o,n,r,a,s,c,l,h,m,d,f,u,p,G,A,P,g,C,y,B,I,k;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,s=t._decorator,c=t.Node,l=t.Prefab,h=t.instantiate,m=t.find,d=t.Vec3,f=t.UITransform,u=t.tween,p=t.Label,G=t.Component,A=t.Sprite},function(t){P=t.Brick},function(t){g=t.GameInstance},function(t){C=t.Hit},function(t){y=t.ActionPoint},function(t){B=t.FloatItem},function(t){I=t.BuyActionPoint},function(t){k=t.ScoreProgressBar}],execute:function(){var v,S,b,F,_,R,D,x,N,T,H,U,M,w,z,X,W,Y,E,L,O;a._RF.push({},"2141aAzrH1B3IrQ6RPbYF+A","GameMode1",void 0);var V=s.ccclass,j=s.property;t("GameMode1",(v=V("一阶段游戏模式"),S=j({type:c,displayName:"静态网格Node"}),b=j({type:l,displayName:"块Prefab"}),F=j({type:l,displayName:"击打特效Prefab"}),_=j({type:l,displayName:"奖励飘字Prefab"}),R=j({type:c,displayName:"击打特效生成区域"}),D=j({type:c,displayName:"体力显示UI"}),x=j({type:c,displayName:"本阶段积分显示UI"}),N=j({type:l,displayName:"购买体力弹窗UI"}),T=j({type:c,displayName:"积分进度条UI"}),v((M=e((U=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).GameInstanceRef=null,o(e,"StaticGrid",M,n(e)),o(e,"BrickPrefab",w,n(e)),o(e,"HitFXPrefab",z,n(e)),o(e,"FloatItemPrefab",X,n(e)),o(e,"HitFxArea",W,n(e)),o(e,"UI_ActionPoint",Y,n(e)),o(e,"UI_Game1_Score",E,n(e)),o(e,"BuyActionPointPrefab",L,n(e)),o(e,"UI_ScoreProgressBar",O,n(e)),e.CanClick=!0,e.MaxActionPoint=15,e.ActionPoint=15,e.AddScore=0,e.AddCoin=0,e.AddActivePoint=0,e.IsNormalGame=!0,e.MonsterType=!0,e.FilledBricks=[],e.VerticalHoles=[],e.BrickArray=[],e}i(e,t);var a=e.prototype;return a.IndexToCoord=function(t){var e=Math.floor(t/9);return{x:t-9*e,y:e}},a.CoordToIndex=function(t,e){return 9*e+t},a.FindChildBrick=function(t,e,i){for(var o,n=r(t.children);!(o=n()).done;){var a=o.value;if(a.getComponent(P).CoordX==e&&a.getComponent(P).CoordY==i)return a}return null},a.BrickInArray=function(t,e){for(var i,o=r(this.FilledBricks);!(i=o()).done;){var n=i.value;if(n.getComponent(P).CoordX==t&&n.getComponent(P).CoordY==e)return!0}return!1},a.FloodFill=function(t,e,i){t<0||e<0||t>=9||e>=7||this.FilledBricks.length>=63||null==this.BrickArray[t][e]||this.BrickArray[t][e].getComponent(P).BrickType!=i||this.BrickInArray(t,e)||(this.FilledBricks.push(this.BrickArray[t][e]),this.FloodFill(t+1,e,i),this.FloodFill(t-1,e,i),this.FloodFill(t,e+1,i),this.FloodFill(t,e-1,i))},a.OpenBuyActionPointUI=function(){var t=this;console.log("打开体力购买弹窗");var e=h(this.BuyActionPointPrefab);e.getComponent(I).BuyActionPointEvent.on("BuyAP",(function(e){t.UI_ActionPoint&&t.UI_ActionPoint.getComponent(y).SetActionPointLabel(e)}),this),e.setParent(m("Canvas/UI")),e.setPosition(new d(0,0,0))},a.GetRandomNum=function(t,e){var i=e-t,o=Math.random();return t+Math.round(o*i)},a.OnBrickClick=function(t,e,i,o,n){if(this.CanClick){if(this.FilledBricks=[],this.FloodFill(t,e,i),this.AddScore=0,this.AddCoin=0,this.AddActivePoint=0,this.FilledBricks.length>1){if(this.IsNormalGame){if(this.ActionPoint<=0)return console.log("常规场 体力不足！"),void this.OpenBuyActionPointUI();this.ActionPoint-=1}else{if(this.ActionPoint<=2)return console.log("快速场 体力不足！"),void this.OpenBuyActionPointUI();this.ActionPoint-=3}this.CanClick=!1,this.AddScore=o*this.FilledBricks.length,this.AddCoin=n*this.FilledBricks.length,this.IsNormalGame||(this.AddScore*=3,this.AddCoin*=3),this.AddActivePoint=this.AddScore;var r=h(this.FloatItemPrefab);if(r.setParent(m("Canvas/UI")),r.getComponent(B).SetScoreNum(this.AddScore),r.setWorldPosition(this.BrickArray[t][e].getWorldPosition()),this.HitFxArea){var a=h(this.HitFXPrefab);a.setParent(this.HitFxArea),a.getComponent(C).SetDisplay(i,this.FilledBricks.length);var s=this.HitFxArea.getComponent(f).contentSize.x/2,c=this.HitFxArea.getComponent(f).contentSize.y/2,l=this.GetRandomNum(this.HitFxArea.getWorldPosition().x-s,this.HitFxArea.getWorldPosition().x+s),u=this.GetRandomNum(this.HitFxArea.getWorldPosition().y-c,this.HitFxArea.getWorldPosition().y+c);a.setWorldPosition(new d(l,u,0)),console.log(a.getWorldPosition())}this.DestoryBricks(),this.MoveDownBricks(),this.CalculateVerticalHoles(),this.FillVerticalHoles()}this.SaveGame()}},a.DestoryBricks=function(){var t=this;console.log("【"+String(this.FilledBricks.length)+"】连击！");var e=function(){var e=t.FilledBricks.shift();if(!e)return"continue";var i=e.getComponent(P).CoordX,o=e.getComponent(P).CoordY;t.BrickArray[i].splice(o,1,null);var n=t.FindChildBrick(t.node,i,o);n&&u(n).to(.05,{scale:new d(.2)}).call((function(){n.getComponent(A).grayscale=!0,n.removeFromParent(),n.destroy()})).start(),t.BrickArray[i].length=7};do{e()}while(this.FilledBricks.length>0)},a.MoveArrayElement=function(t,e,i){var o=t.splice(e,1);t.splice(e+i,0,o[0]),t.length=7},a.MoveDownBricks=function(){for(var t=0;t<9;t++)for(var e=6;e>0;e--)if(null===this.BrickArray[t][e]){for(var i=e-1;!(null!=this.BrickArray[t][i]||i<=0);)i-=1;null!=this.BrickArray[t][i]&&(this.BrickArray[t][i].getComponent(P).CoordX=t,this.BrickArray[t][i].getComponent(P).CoordY=e,u(this.BrickArray[t][i]).to(.25,{position:this.StaticGrid.children[this.CoordToIndex(t,e)].getPosition()}).start(),this.MoveArrayElement(this.BrickArray[t],i,e-i))}},a.CalculateVerticalHoles=function(){this.VerticalHoles=[];for(var t=0;t<9;t++){for(var e=0,i=0;i<7;i++)null==this.BrickArray[t][i]&&(e+=1);this.VerticalHoles.push(e)}},a.FillVerticalHoles=function(){for(var t=this,e=0;e<9;e++)for(var i=0;i<this.VerticalHoles[e];i++){var o=this.StaticGrid.children[this.CoordToIndex(e,i)].getPosition(),n=h(this.BrickPrefab);n.getComponent(P).SetBrickType(this.GetRandomNum(0,n.getComponent(P).Images.length-1)),n.setPosition(new d(o.x,400,0)),n.setParent(this.node),n.getComponent(P).CoordX=e,n.getComponent(P).CoordY=i,n.getComponent(P).BrickEvent.on("Click",(function(e,i,o,n,r){t.OnBrickClick(e,i,o,n,r)})),this.BrickArray[e].splice(i,1,n),u(n).to(.25,{position:o}).start()}this.CanClick=!0},a.ResetBrickArray=function(){for(var t=0;t<9;t++){this.BrickArray[t]=[];for(var e=0;e<7;e++)for(var i,o=r(this.node.children);!(i=o()).done;){var n=i.value;if(n.getComponent(P).CoordX==t&&n.getComponent(P).CoordY==e){this.BrickArray[t].push(n);break}}}},a.InitBrickArray=function(){if(this.StaticGrid)for(var t=0;t<9;t++){this.BrickArray[t]=[];for(var e=0;e<7;e++)this.BrickArray[t].push(this.node.children[this.CoordToIndex(t,e)])}},a.InitBricks=function(){var t=this;if(this.StaticGrid){for(var e in this.node.setPosition(this.StaticGrid.getPosition()),this.StaticGrid.children){var i=h(this.BrickPrefab);i.getComponent(P).SetBrickType(this.GetRandomNum(0,i.getComponent(P).Images.length-1)),i.setParent(this.node),i.setPosition(this.StaticGrid.children[e].getPosition()),i.getComponent(P).CoordX=this.IndexToCoord(Number(e)).x,i.getComponent(P).CoordY=this.IndexToCoord(Number(e)).y,i.getComponent(P).BrickEvent.on("Click",(function(e,i,o,n,r){t.OnBrickClick(e,i,o,n,r)}))}this.InitBrickArray()}},a.SaveGame=function(){if(console.log("GameMode1保存游戏"),this.IsNormalGame){this.GameInstanceRef.GameData.Game1_NormalBrickTypes=[];for(var t=0;t<7;t++)for(var e=0;e<9;e++)this.GameInstanceRef.GameData.Game1_NormalBrickTypes.push(this.BrickArray[e][t].getComponent(P).BrickType)}else{this.GameInstanceRef.GameData.Game1_FastBrickTypes=[];for(var i=0;i<7;i++)for(var o=0;o<9;o++)this.GameInstanceRef.GameData.Game1_FastBrickTypes.push(this.BrickArray[o][i].getComponent(P).BrickType)}this.GameInstanceRef.GameData.MaxActionPoint=this.MaxActionPoint,this.GameInstanceRef.GameData.ActionPoint=this.ActionPoint,this.UI_ActionPoint&&this.UI_ActionPoint.getComponent(y).SetActionPointLabel(this.ActionPoint),this.GameInstanceRef.GameData.Score+=this.AddScore,this.GameInstanceRef.GameData.Game1_Score+=this.AddScore,this.GameInstanceRef.GameData.Coin+=this.AddCoin,this.GameInstanceRef.GameData.ActivePoint+=this.AddActivePoint,this.UI_Game1_Score&&(this.UI_Game1_Score.getComponent(p).string=String(this.GameInstanceRef.GameData.Game1_Score)),this.GameInstanceRef.SaveData(),this.UI_ScoreProgressBar.getComponent(k).UpdateProgressBar(this.GameInstanceRef.GameData.Game1_Score,this.GameInstanceRef.GameData.Game1_SilverHammer)},a.LoadGame=function(){var t=this;if(console.log("GameMode1读取游戏"),this.MaxActionPoint=this.GameInstanceRef.GameData.MaxActionPoint,this.ActionPoint=this.GameInstanceRef.GameData.ActionPoint,this.UI_ActionPoint&&this.UI_ActionPoint.getComponent(y).SetActionPointLabel(this.ActionPoint),this.UI_Game1_Score&&(this.UI_Game1_Score.getComponent(p).string=String(this.GameInstanceRef.GameData.Game1_Score)),this.IsNormalGame=this.GameInstanceRef.GameData.Game1_IsNormalGame,this.MonsterType=this.GameInstanceRef.GameData.Game1_MonsterType,this.IsNormalGame){if(this.GameInstanceRef.GameData.Game1_NormalBrickTypes.length<=0)this.InitBricks();else if(this.StaticGrid)for(var e in this.node.setPosition(this.StaticGrid.getPosition()),this.StaticGrid.children){var i=h(this.BrickPrefab);i.getComponent(P).SetBrickType(this.GameInstanceRef.GameData.Game1_NormalBrickTypes[e]),i.setParent(this.node),i.setPosition(this.StaticGrid.children[e].getPosition()),i.getComponent(P).CoordX=this.IndexToCoord(Number(e)).x,i.getComponent(P).CoordY=this.IndexToCoord(Number(e)).y,i.getComponent(P).BrickEvent.on("Click",(function(e,i,o,n,r){t.OnBrickClick(e,i,o,n,r)}))}this.InitBrickArray()}else{if(this.GameInstanceRef.GameData.Game1_FastBrickTypes.length<=0)this.InitBricks();else if(this.StaticGrid)for(var o in this.node.setPosition(this.StaticGrid.getPosition()),this.StaticGrid.children){var n=h(this.BrickPrefab);n.getComponent(P).SetBrickType(this.GameInstanceRef.GameData.Game1_FastBrickTypes[o]),n.setParent(this.node),n.setPosition(this.StaticGrid.children[o].getPosition()),n.getComponent(P).CoordX=this.IndexToCoord(Number(o)).x,n.getComponent(P).CoordY=this.IndexToCoord(Number(o)).y,n.getComponent(P).BrickEvent.on("Click",(function(e,i,o,n,r){t.OnBrickClick(e,i,o,n,r)}))}this.InitBrickArray()}},a.start=function(){var t=this;this.node.setWorldPosition(this.StaticGrid.getWorldPosition()),this.GameInstanceRef=this.node.getComponent(g),this.UI_ActionPoint.getComponent(y).ActionPointEvent.on("NewAPSet",(function(e){t.ActionPoint=e}),this),this.UI_ScoreProgressBar.getComponent(k).BarEvent.on("GetSilverHammer",(function(e){t.GameInstanceRef.GameData.Game1_SilverHammer+=e,t.GameInstanceRef.GameData.SilverHammer+=e,t.GameInstanceRef.GameData.Score-=t.AddScore,t.GameInstanceRef.GameData.Game1_Score-=t.AddScore,t.GameInstanceRef.GameData.Coin-=t.AddCoin,t.GameInstanceRef.GameData.ActivePoint-=t.AddActivePoint,t.SaveGame()})),this.LoadGame()},a.update=function(t){},e}(G)).prototype,"StaticGrid",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(U.prototype,"BrickPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(U.prototype,"HitFXPrefab",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(U.prototype,"FloatItemPrefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=e(U.prototype,"HitFxArea",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(U.prototype,"UI_ActionPoint",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(U.prototype,"UI_Game1_Score",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(U.prototype,"BuyActionPointPrefab",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(U.prototype,"UI_ScoreProgressBar",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=U))||H));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameMode2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameInstance.ts","./ActionPoint.ts","./Lantern.ts","./BuyActionPoint.ts","./ScoreProgressBar.ts","./Game2Popup.ts"],(function(e){var t,n,a,i,r,o,s,c,m,h,l,u,p,G,f,L,P,I,g,y,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,s=e._decorator,c=e.JsonAsset,m=e.Prefab,h=e.Node,l=e.instantiate,u=e.find,p=e.Vec3,G=e.Label,f=e.Component},function(e){L=e.GameInstance},function(e){P=e.ActionPoint},function(e){I=e.Lantern},function(e){g=e.BuyActionPoint},function(e){y=e.ScoreProgressBar},function(e){d=e.Game2Popup}],execute:function(){var C,A,S,_,v,b,U,R,D,T,N,w,B,F,O,M,H,z,x,E,W,J,k;o._RF.push({},"45dcaAaHU5OL7rGlFExkWY/","GameMode2",void 0);var j=s.ccclass,V=s.property;e("GameMode2",(C=j("二阶段游戏模式"),A=V({type:c,displayName:"阶段二数据"}),S=V({type:m,displayName:"灯笼Prefab"}),_=V({type:h,displayName:"灯笼悬挂区域Node"}),v=V({type:h,displayName:"体力显示UI"}),b=V({type:h,displayName:"本阶段积分显示UI"}),U=V({type:h,displayName:"本局积分显示UI"}),R=V({type:h,displayName:"本局评级显示UI"}),D=V({type:m,displayName:"购买体力弹窗UI"}),T=V({type:h,displayName:"积分进度条UI"}),N=V({type:m,displayName:"结算弹窗Prefab"}),C((F=t((B=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).GameInstanceRef=null,a(t,"GameMode2DataJson",F,i(t)),a(t,"LanternPrefab",O,i(t)),a(t,"LanternHangArea",M,i(t)),a(t,"UI_ActionPoint",H,i(t)),a(t,"UI_Game2_Score",z,i(t)),a(t,"UI_CurrentScore",x,i(t)),a(t,"UI_CurrentGrade",E,i(t)),a(t,"BuyActionPointPrefab",W,i(t)),a(t,"UI_ScoreProgressBar",J,i(t)),a(t,"PopupPrefab",k,i(t)),t.CurrentLanternRef=null,t.CurrentLanternType=void 0,t.LanternTypes=[],t.LanternPositions=[],t.MaxActionPoint=15,t.ActionPoint=15,t.Game2Score=0,t.Game2Rank=0,t.IsNormalGame=!0,t.IsGameOver=!1,t}n(t,e);var o=t.prototype;return o.OpenBuyActionPointUI=function(){var e=this;console.log("打开体力购买弹窗");var t=l(this.BuyActionPointPrefab);t.getComponent(g).BuyActionPointEvent.on("BuyAP",(function(t){e.UI_ActionPoint&&e.UI_ActionPoint.getComponent(P).SetActionPointLabel(t)}),this),t.setParent(u("Canvas/UI")),t.setPosition(new p(0,0,0))},o.CalculateLanternDirection=function(){if(this.LanternHangArea.children.length<=0)return 1;for(var e,t=0,n=0,a=r(this.LanternHangArea.children);!(e=a()).done;){e.value.getPosition().x>=0?t+=1:n+=1}return t>=n?-1:1},o.LaunchLantern=function(){if(!this.IsGameOver){if(this.IsNormalGame){if(this.ActionPoint<=0)return console.log("常规场 体力不足！"),void this.OpenBuyActionPointUI();this.ActionPoint-=1}else{if(this.ActionPoint<=2)return console.log("快速场 体力不足！"),void this.OpenBuyActionPointUI();this.ActionPoint-=3}console.log(this.ActionPoint),this.UI_ActionPoint&&this.UI_ActionPoint.getComponent(P).SetActionPointLabel(this.ActionPoint),this.CurrentLanternRef&&this.CurrentLanternRef.getComponent(I).StartFall(),this.SaveGame()}},o.OnLanternFinish=function(){console.log("On Lantern Finish"),this.LanternHangArea&&(this.CurrentLanternRef.setParent(this.LanternHangArea,!0),this.LanternTypes.push(this.CurrentLanternRef.getComponent(I).LanternType),this.LanternPositions.push(this.CurrentLanternRef.getWorldPosition()),this.SpawnLantern(!1),this.UpdateScoreAndGrade(),this.SaveGame())},o.OnGameOver=function(){console.log("Game Over!"),this.IsGameOver=!0;var e=this.UpdateScoreAndGrade().Score,t=this.UpdateScoreAndGrade().Coin;this.IsNormalGame||(e*=3,t*=3),this.GameInstanceRef.GameData.Game2_Score+=e,this.GameInstanceRef.GameData.Score+=e,this.GameInstanceRef.GameData.ActivePoint+=e,this.GameInstanceRef.GameData.Coin+=t;var n=l(this.PopupPrefab);n.getComponent(d).Init(e,t,this.UpdateScoreAndGrade().Grade),n.setParent(u("Canvas/UI")),this.UI_ScoreProgressBar.getComponent(y).UpdateProgressBar(this.GameInstanceRef.GameData.Game2_Score,this.GameInstanceRef.GameData.Game2_SilverHammer),this.UI_Game2_Score&&(this.UI_Game2_Score.getComponent(G).string=String(this.GameInstanceRef.GameData.Game2_Score)),this.LanternTypes.length=0,this.LanternPositions.length=0,this.SaveGame()},o.GetRandomNum=function(e,t){var n=t-e,a=Math.random();return e+Math.round(a*n)},o.SpawnLantern=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=0),this.CurrentLanternRef=l(this.LanternPrefab),this.CurrentLanternType=e?t:this.GetRandomNum(0,this.CurrentLanternRef.getComponent(I).LanternImages.length-1),this.CurrentLanternRef.getComponent(I).InitLantern(this.CurrentLanternType,this.CalculateLanternDirection()),this.CurrentLanternRef.setParent(this.node),this.CurrentLanternRef.setWorldPosition(this.node.getWorldPosition()),this.CurrentLanternRef.getComponent(I).LanternEvent.on("LanternFinish",this.OnLanternFinish,this),this.CurrentLanternRef.getComponent(I).LanternEvent.on("GameOver",this.OnGameOver,this),this.SaveGame()},o.UpdateScoreAndGrade=function(){var e=this.LanternTypes.length,t=this.GameMode2DataJson.json;return this.UI_CurrentGrade&&this.UI_CurrentScore&&(this.IsNormalGame?this.UI_CurrentScore.getComponent(G).string=String(t[e].Score):this.UI_CurrentScore.getComponent(G).string=String(3*t[e].Score),this.UI_CurrentGrade.getComponent(G).string=String(t[e].Grade)),t[e]},o.LoadGame=function(){if(console.log("Game Mode2 读取游戏"),this.MaxActionPoint=this.GameInstanceRef.GameData.MaxActionPoint,this.ActionPoint=this.GameInstanceRef.GameData.ActionPoint,this.UI_ActionPoint&&this.UI_ActionPoint.getComponent(P).SetActionPointLabel(this.ActionPoint),this.UI_Game2_Score&&(this.UI_Game2_Score.getComponent(G).string=String(this.GameInstanceRef.GameData.Game2_Score)),this.IsNormalGame=this.GameInstanceRef.GameData.Game2_IsNormalGame,this.IsNormalGame)if(this.CurrentLanternType=this.GameInstanceRef.GameData.Game2_NormalCurrentLanternType,this.LanternTypes=this.GameInstanceRef.GameData.Game2_NormalLanternTypes,this.LanternPositions=this.GameInstanceRef.GameData.Game2_NormalLanternPositions,this.LanternTypes.length>0){for(var e in this.LanternTypes){var t=l(this.LanternPrefab);t.getComponent(I).InitLantern(this.LanternTypes[e],this.CalculateLanternDirection()),t.getComponent(I).IsFinished=!0,t.setParent(this.LanternHangArea),t.setWorldPosition(this.LanternPositions[e])}this.SpawnLantern(!0,this.CurrentLanternType)}else this.SpawnLantern(!1);else if(this.CurrentLanternType=this.GameInstanceRef.GameData.Game2_FastCurrentLanternType,this.LanternTypes=this.GameInstanceRef.GameData.Game2_FastLanternTypes,this.LanternPositions=this.GameInstanceRef.GameData.Game2_FastLanternPositions,this.LanternTypes.length>0){for(var n in this.LanternTypes){var a=l(this.LanternPrefab);a.getComponent(I).InitLantern(this.LanternTypes[n],this.CalculateLanternDirection()),a.getComponent(I).IsFinished=!0,a.setParent(this.LanternHangArea),a.setWorldPosition(this.LanternPositions[n])}this.SpawnLantern(!0,this.CurrentLanternType)}else this.SpawnLantern(!1)},o.SaveGame=function(){console.log("Game Mode2 保存游戏"),this.GameInstanceRef.GameData.MaxActionPoint=this.MaxActionPoint,this.GameInstanceRef.GameData.ActionPoint=this.ActionPoint,this.UI_ActionPoint&&this.UI_ActionPoint.getComponent(P).SetActionPointLabel(this.ActionPoint),this.IsNormalGame?(this.GameInstanceRef.GameData.Game2_NormalCurrentLanternType=this.CurrentLanternType,this.GameInstanceRef.GameData.Game2_NormalLanternTypes=this.LanternTypes,this.GameInstanceRef.GameData.Game2_NormalLanternPositions=this.LanternPositions):(this.GameInstanceRef.GameData.Game2_FastCurrentLanternType=this.CurrentLanternType,this.GameInstanceRef.GameData.Game2_FastLanternTypes=this.LanternTypes,this.GameInstanceRef.GameData.Game2_FastLanternPositions=this.LanternPositions),this.GameInstanceRef.SaveData()},o.start=function(){var e=this;this.GameInstanceRef=this.node.getComponent(L),this.UI_ActionPoint.getComponent(P).ActionPointEvent.on("NewAPSet",(function(t){e.ActionPoint=t}),this),this.UI_ScoreProgressBar.getComponent(y).BarEvent.on("GetSilverHammer",(function(t){e.GameInstanceRef.GameData.Game2_SilverHammer+=t,e.GameInstanceRef.GameData.SilverHammer+=t,e.SaveGame()})),this.LoadGame(),this.UpdateScoreAndGrade()},o.update=function(e){},t}(f)).prototype,"GameMode2DataJson",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(B.prototype,"LanternPrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(B.prototype,"LanternHangArea",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(B.prototype,"UI_ActionPoint",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(B.prototype,"UI_Game2_Score",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(B.prototype,"UI_CurrentScore",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(B.prototype,"UI_CurrentGrade",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(B.prototype,"BuyActionPointPrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(B.prototype,"UI_ScoreProgressBar",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(B.prototype,"PopupPrefab",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=B))||w));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameMode3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameInstance.ts","./WireTile.ts","./FloatItem.ts","./ActionPoint.ts","./BuyActionPoint.ts","./ScoreProgressBar.ts","./Game3Popup.ts"],(function(t){var e,i,n,o,a,r,h,s,l,m,c,d,P,u,f,g,p,I,G,y,x,R,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy,h=t._decorator,s=t.Node,l=t.Prefab,m=t.JsonAsset,c=t.SpriteFrame,d=t.instantiate,P=t.find,u=t.Vec3,f=t.Label,g=t.Component},function(t){p=t.GameInstance},function(t){I=t.WireTile},function(t){G=t.FloatItem},function(t){y=t.ActionPoint},function(t){x=t.BuyActionPoint},function(t){R=t.ScoreProgressBar},function(t){S=t.Game3Popup}],execute:function(){var T,C,v,A,b,D,O,_,N,F,U,B,w,W,E,M,j,z,J,k,H,L,X,Y,V,q,K;r._RF.push({},"3afc5AR4MFEpog+x1oH0pF/","GameMode3",void 0);var Q=h.ccclass,Z=h.property,$=[{x:0,y:1},{x:1,y:0},{x:0,y:-1},{x:-1,y:0}];t("GameMode3",(T=Q("GameMode3"),C=Z({type:s,displayName:"静态网格Node"}),v=Z({type:l,displayName:"块Prefab"}),A=Z({type:l,displayName:"奖励飘字Prefab"}),b=Z({type:s,displayName:"体力显示UI"}),D=Z({type:s,displayName:"本阶段积分显示UI"}),O=Z({type:l,displayName:"购买体力弹窗UI"}),_=Z({type:s,displayName:"积分进度条UI"}),N=Z({type:l,displayName:"结算弹窗Prefab"}),F=Z({type:m,displayName:"Tile数据"}),U=Z({type:c,displayName:"火Sprite"}),B=Z({type:c,displayName:"小烟花Sprite"}),w=Z({type:c,displayName:"大烟花Sprite"}),T((M=e((E=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this).GameInstanceRef=null,n(e,"StaticTile",M,o(e)),n(e,"WireTilePrefab",j,o(e)),n(e,"FloatItemPrefab",z,o(e)),n(e,"UI_ActionPoint",J,o(e)),n(e,"UI_Game3_Score",k,o(e)),n(e,"BuyActionPointPrefab",H,o(e)),n(e,"UI_ScoreProgressBar",L,o(e)),n(e,"PopupPrefab",X,o(e)),e.IsGameOver=!1,e.TileState=[],e.MaxActionPoint=15,e.ActionPoint=15,n(e,"TileDataJson",Y,o(e)),n(e,"FireSprite",V,o(e)),n(e,"SmallFireWorkSprite",q,o(e)),n(e,"BigFireWorkSprite",K,o(e)),e.IsNormalGame=!0,e.StartPoint={x:0,y:0},e.EndPoint={x:0,y:0},e.RightPath=[],e.OtherPath=[],e}i(e,t);var r=e.prototype;return r.IndexToCoord=function(t){var e=Math.floor(t/4);return{x:t-4*e,y:e}},r.CoordToIndex=function(t,e){return 4*e+t},r.FindChildBrick=function(t,e,i){for(var n,o=a(t.children);!(n=o()).done;){var r=n.value;if(r.getComponent(I).CoordX==e&&r.getComponent(I).CoordY==i)return r}return null},r.GetRandomNum=function(t,e){var i=e-t,n=Math.random();return t+Math.round(n*i)},r.RandomAssignStartAndEndPoint=function(){this.StartPoint.x=0,this.StartPoint.y=this.GetRandomNum(0,3),this.EndPoint.x=3,this.EndPoint.y=this.GetRandomNum(0,3)},r.Union=function(t,e){var i=t.concat(e),n=new Set(i);return i=Array.from(n)},r.ExistInArray=function(t,e){for(var i in e)if(t===e[i])return!0;return!1},r.IsOutOfBorder=function(t,e){return t<0||e<0||t>=4||e>=4},r.GenerateRightPath=function(t,e){console.log("正确路径起点"),console.log(t),console.log("正确路径终点"),console.log(e);var i=0;this.RightPath.length=0;var n=t;for(this.RightPath.push(this.CoordToIndex(n.x,n.y));n.x!=e.x||n.y!=e.y;){var o=$[this.GetRandomNum(0,$.length-1)],a={x:n.x+o.x,y:n.y+o.y};i++,this.IsOutOfBorder(a.x,a.y)||this.ExistInArray(this.CoordToIndex(a.x,a.y),this.RightPath)?i>=16&&(i=0,this.RightPath.length=0,n=t,this.RightPath.push(this.CoordToIndex(n.x,n.y))):(n=a,this.RightPath.push(this.CoordToIndex(n.x,n.y)))}console.log("正确路径"),console.log(this.RightPath),this.SaveGame()},r.GrenerateOtherPath=function(){var t=this,e=Array.from({length:16},(function(t,e){return e})).filter((function(e,i,n){if(-1===t.RightPath.indexOf(e))return e})),i=e[this.GetRandomNum(0,e.length-1)],n={x:this.IndexToCoord(i).x,y:this.IndexToCoord(i).y},o=0;this.OtherPath.length=0;var a=n;for(this.OtherPath.push(this.CoordToIndex(a.x,a.y));!this.ExistInArray(this.CoordToIndex(a.x,a.y),this.RightPath);){var r=$[this.GetRandomNum(0,$.length-1)],h={x:a.x+r.x,y:a.y+r.y};o++,this.IsOutOfBorder(h.x,h.y)||(0==this.RightPath.indexOf(this.CoordToIndex(h.x,h.y))||this.RightPath.indexOf(this.CoordToIndex(h.x,h.y))==this.RightPath.length-1||this.ExistInArray(this.CoordToIndex(h.x,h.y),this.OtherPath)||o>=16?(o=0,this.OtherPath.length=0,a=n,this.OtherPath.push(this.CoordToIndex(a.x,a.y))):(a=h,this.OtherPath.push(this.CoordToIndex(a.x,a.y))))}console.log("岔路路径"),console.log(this.OtherPath),this.SaveGame()},r.DetectGameOver=function(){for(var t,e=a(this.RightPath);!(t=e()).done;){var i=t.value;if(1==this.TileState[i])return!1}console.log("Game Over!"),this.IsGameOver=!0;var n=0,o=0;n+=this.TileDataJson.json[0].Score*(this.RightPath.length-2)+this.TileDataJson.json[1].Score,o+=this.TileDataJson.json[0].Coin*(this.RightPath.length-2)+this.TileDataJson.json[1].Coin;for(var r=0;r<this.OtherPath.length-1;r++)0==this.node.children[this.OtherPath[r]].getComponent(I).IsHidden&&(n+=this.TileDataJson.json[0].Score,o+=this.TileDataJson.json[0].Coin);this.IsNormalGame||(n*=3,o*=3);var h=d(this.PopupPrefab);return h.getComponent(S).Init(n,o),h.setParent(P("Canvas/UI")),this.TileState.length=0,this.SaveGame(),!0},r.FindDirectionIndex=function(t,e){for(var i in $)if($[i].x==t&&$[i].y==e)return Number(i);return-1},r.HowToAdjacent=function(t,e){var i=[],n=this.RightPath.indexOf(this.CoordToIndex(t,e));if(-1!=n){if(n-1>=0){var o=this.IndexToCoord(this.RightPath[n-1]).x,a=this.IndexToCoord(this.RightPath[n-1]).y,r=this.FindDirectionIndex(o-t,a-e);-1!=r&&i.push(r)}if(n+1<=this.RightPath.length-1){var h=this.IndexToCoord(this.RightPath[n+1]).x,s=this.IndexToCoord(this.RightPath[n+1]).y,l=this.FindDirectionIndex(h-t,s-e);-1!=l&&i.push(l)}}var m=this.OtherPath.indexOf(this.CoordToIndex(t,e));if(-1!=m){if(m-1>=0){var c=this.IndexToCoord(this.OtherPath[m-1]).x,d=this.IndexToCoord(this.OtherPath[m-1]).y,P=this.FindDirectionIndex(c-t,d-e);-1!=P&&i.push(P)}if(m+1<=this.OtherPath.length-1){var u=this.IndexToCoord(this.OtherPath[m+1]).x,f=this.IndexToCoord(this.OtherPath[m+1]).y,g=this.FindDirectionIndex(u-t,f-e);-1!=g&&i.push(g)}}return i=this.Union(i,i)},r.OpenBuyActionPointUI=function(){var t=this;console.log("打开体力购买弹窗");var e=d(this.BuyActionPointPrefab);e.getComponent(x).BuyActionPointEvent.on("BuyAP",(function(e){t.UI_ActionPoint&&t.UI_ActionPoint.getComponent(y).SetActionPointLabel(e)}),this),e.setParent(P("Canvas/UI")),e.setPosition(new u(0,0,0))},r.GenerateTiles=function(t){void 0===t&&(t=!1),console.log(this.node.children);for(var e=0;e<16;e++){var i=d(this.WireTilePrefab);i.setParent(this.node),i.setWorldPosition(this.StaticTile.children[e].getWorldPosition()),i.getComponent(I).CoordX=this.IndexToCoord(e).x,i.getComponent(I).CoordY=this.IndexToCoord(e).y,i.getComponent(I).AdjacentMethods=this.HowToAdjacent(this.IndexToCoord(e).x,this.IndexToCoord(e).y),i.getComponent(I).DrawWire(),t&&0==this.TileState[e]&&i.getComponent(I).RemoveLid(),i.getComponent(I).WireTileEvent.on("Click",this.OnTileClick,this)}this.node.children[this.RightPath[0]].getComponent(I).DrawItem(this.FireSprite),this.node.children[this.RightPath[this.RightPath.length-1]].getComponent(I).DrawItem(this.BigFireWorkSprite);for(var n=1;n<this.RightPath.length-1;n++)this.node.children[this.RightPath[n]].getComponent(I).DrawItem(this.SmallFireWorkSprite);for(var o=0;o<this.OtherPath.length-1;o++)this.node.children[this.OtherPath[o]].getComponent(I).DrawItem(this.SmallFireWorkSprite);this.node.children[this.RightPath[0]].getComponent(I).RemoveLid(),this.TileState.length=0;for(var a=0;a<16;a++)this.TileState.push(this.node.children[a].getComponent(I).IsHidden);this.SaveGame()},r.OnTileClick=function(t,e,i,n){if(!this.IsGameOver){var o=this.node.children[this.CoordToIndex(t,e)].getComponent(I);if(i){if(this.IsNormalGame){if(this.ActionPoint<=0)return console.log("常规场 体力不足！"),this.OpenBuyActionPointUI(),void this.DetectGameOver();this.ActionPoint-=1}else{if(this.ActionPoint<=2)return console.log("快速场 体力不足！"),this.OpenBuyActionPointUI(),void this.DetectGameOver();this.ActionPoint-=3}if(o.RemoveLid(),n.length>0){var a=this.TileDataJson.json[0].Score,r=this.TileDataJson.json[0].Coin;this.RightPath.indexOf(this.CoordToIndex(t,e))==this.RightPath.length-1&&(a=this.TileDataJson.json[1].Score,r=this.TileDataJson.json[1].Coin),this.IsNormalGame||(a*=3,r*=3);var h=a;this.GameInstanceRef.GameData.Score+=a,this.GameInstanceRef.GameData.Game3_Score+=a,this.GameInstanceRef.GameData.Coin+=r,this.GameInstanceRef.GameData.ActivePoint+=h,this.UI_ScoreProgressBar.getComponent(R).UpdateProgressBar(this.GameInstanceRef.GameData.Game3_Score,this.GameInstanceRef.GameData.Game3_SilverHammer);var s=d(this.FloatItemPrefab);s.setParent(this.node),s.getComponent(G).SetScoreNum(a),s.setWorldPosition(o.node.getWorldPosition())}this.TileState[this.CoordToIndex(t,e)]=o.IsHidden,this.SaveGame(),this.DetectGameOver()}}},r.SaveGame=function(){console.log("GameMode3保存游戏"),this.GameInstanceRef.GameData.MaxActionPoint=this.MaxActionPoint,this.GameInstanceRef.GameData.ActionPoint=this.ActionPoint,this.IsNormalGame?(this.GameInstanceRef.GameData.Game3_NormalTileState=this.TileState,this.GameInstanceRef.GameData.Game3_NormalRightPath=this.RightPath,this.GameInstanceRef.GameData.Game3_NormalOtherPath=this.OtherPath):(this.GameInstanceRef.GameData.Game3_FastTileState=this.TileState,this.GameInstanceRef.GameData.Game3_FastRightPath=this.RightPath,this.GameInstanceRef.GameData.Game3_FastOtherPath=this.OtherPath),this.UI_ActionPoint&&this.UI_ActionPoint.getComponent(y).SetActionPointLabel(this.ActionPoint),this.UI_Game3_Score&&(this.UI_Game3_Score.getComponent(f).string=String(this.GameInstanceRef.GameData.Game3_Score)),this.GameInstanceRef.SaveData()},r.LoadGame=function(){console.log("GameMode3读取游戏"),this.MaxActionPoint=this.GameInstanceRef.GameData.MaxActionPoint,this.ActionPoint=this.GameInstanceRef.GameData.ActionPoint,this.UI_ActionPoint&&this.UI_ActionPoint.getComponent(y).SetActionPointLabel(this.ActionPoint),this.UI_Game3_Score&&(this.UI_Game3_Score.getComponent(f).string=String(this.GameInstanceRef.GameData.Game3_Score)),this.IsNormalGame=this.GameInstanceRef.GameData.Game3_IsNormalGame,this.IsNormalGame?(this.TileState=this.GameInstanceRef.GameData.Game3_NormalTileState,this.RightPath=this.GameInstanceRef.GameData.Game3_NormalRightPath,this.OtherPath=this.GameInstanceRef.GameData.Game3_NormalOtherPath):(this.TileState=this.GameInstanceRef.GameData.Game3_FastTileState,this.RightPath=this.GameInstanceRef.GameData.Game3_FastRightPath,this.OtherPath=this.GameInstanceRef.GameData.Game3_FastOtherPath),this.TileState.length>0?(this.StartPoint.x=this.IndexToCoord(this.RightPath[0]).x,this.StartPoint.y=this.IndexToCoord(this.RightPath[0]).y,this.EndPoint.x=this.IndexToCoord(this.RightPath[this.RightPath.length-1]).x,this.EndPoint.y=this.IndexToCoord(this.RightPath[this.RightPath.length-1]).y,this.GenerateTiles(!0)):(this.RandomAssignStartAndEndPoint(),this.GenerateRightPath(this.StartPoint,this.EndPoint),this.GrenerateOtherPath(),this.GenerateTiles(!1))},r.start=function(){var t=this;this.node.setWorldPosition(this.StaticTile.getWorldPosition()),this.GameInstanceRef=this.node.getComponent(p),this.UI_ActionPoint.getComponent(y).ActionPointEvent.on("NewAPSet",(function(e){t.ActionPoint=e}),this),this.UI_ScoreProgressBar.getComponent(R).BarEvent.on("GetSilverHammer",(function(e){t.GameInstanceRef.GameData.Game3_SilverHammer+=e,t.GameInstanceRef.GameData.SilverHammer+=e,t.SaveGame()})),this.LoadGame()},r.update=function(t){},e}(g)).prototype,"StaticTile",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(E.prototype,"WireTilePrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(E.prototype,"FloatItemPrefab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=e(E.prototype,"UI_ActionPoint",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(E.prototype,"UI_Game3_Score",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(E.prototype,"BuyActionPointPrefab",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(E.prototype,"UI_ScoreProgressBar",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(E.prototype,"PopupPrefab",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(E.prototype,"TileDataJson",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(E.prototype,"FireSprite",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(E.prototype,"SmallFireWorkSprite",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(E.prototype,"BigFireWorkSprite",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=E))||W));r._RF.pop()}}}));

System.register("chunks:///_virtual/Hit.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,n,o,a,s,l,c,p,u,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.SpriteFrame,l=e.Label,c=e.Sprite,p=e.tween,u=e.Vec3,f=e.Component}],execute:function(){var y,d,m,g,h,b,v;o._RF.push({},"d66eeJzv9tM/4iig2JfUJI4","Hit",void 0);var L=a.ccclass,w=a.property;e("Hit",(y=L("Hit"),d=w({type:s,displayName:"图片组"}),m=w({type:l,displayName:"数字显示"}),y((b=t((h=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"Images",b,n(t)),r(t,"TextLabel",v,n(t)),t}i(t,e);var o=t.prototype;return o.SetDisplay=function(e,t){this.node.getComponent(c).spriteFrame=this.Images[e],this.TextLabel.getComponent(l).string="×"+String(t)},o.start=function(){var e=this;p(this.node).to(.08,{scale:new u(1.5,1.5,1.5)}).start(),this.schedule((function(){e.node.removeFromParent(),e.node.destroy()}),.7)},o.update=function(e){},t}(f)).prototype,"Images",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=t(h.prototype,"TextLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=h))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/Lantern.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,o,r,a,s,l,p,h,c,u,m,g,L,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.SpriteFrame,l=t.Node,p=t.CCFloat,h=t.EventTarget,c=t.Sprite,u=t.Vec3,m=t.UITransform,g=t.BoxCollider2D,L=t.Contact2DType,y=t.Component}],execute:function(){var d,f,F,I,C,b,z,B,N,S,w,v,T,D,R,E,O;r._RF.push({},"4ec5cMuAlBMqZIlwJH+MlhE","Lantern",void 0);var _=a.ccclass,H=a.property;t("Lantern",(d=_("Lantern"),f=H({type:s,displayName:"灯笼图片组"}),F=H({type:s,displayName:"灯笼下部图片组"}),I=H({type:l,displayName:"绳子Node"}),C=H({type:l,displayName:"灯笼Node"}),b=H({type:l,displayName:"灯笼下部Node"}),z=H({type:p,displayName:"灯笼左右移动速度"}),B=H({type:p,displayName:"灯笼下落速度"}),d((w=e((S=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).LanternEvent=new h,e.LanternType=void 0,i(e,"LanternImages",w,o(e)),i(e,"LanternBottomImages",v,o(e)),i(e,"Rope",T,o(e)),i(e,"Lantern",D,o(e)),i(e,"LanternBottom",R,o(e)),i(e,"HorizontalSpeed",E,o(e)),i(e,"FallSpeed",O,o(e)),e.Direction=1,e.IsFalling=!1,e.IsFinished=!1,e}n(e,t);var r=e.prototype;return r.StartFall=function(){this.IsFinished||(this.IsFalling=!0)},r.OnRopeBeginContact=function(t,e,n){!this.IsFinished&&this.IsFalling&&8==e.group&&(this.IsFinished=!0,this.IsFalling=!1,console.log("Lantern Finish!"),this.LanternEvent.emit("LanternFinish"))},r.OnLanternBeginContact=function(t,e,n){this.IsFinished||this.IsFalling||16==e.group&&(this.Direction*=-1),!this.IsFinished&&this.IsFalling&&(this.LanternEvent.emit("GameOver"),this.IsFinished=!0)},r.InitLantern=function(t,e){this.LanternType=t,this.Direction=e,this.Lantern.getComponent(c).spriteFrame=this.LanternImages[t],this.LanternBottom.getComponent(c).spriteFrame=this.LanternBottomImages[t],this.Lantern.setPosition(new u(0,-1*this.Rope.getComponent(m).contentSize.y,0)),this.Lantern.getComponent(g).size.x=this.Lantern.getComponent(m).contentSize.x,this.Lantern.getComponent(g).size.y=this.Lantern.getComponent(m).contentSize.y/2,this.Lantern.getComponent(g).offset.y=this.Lantern.getComponent(m).contentSize.y/2*-1,this.LanternBottom.setPosition(new u(0,-1*this.Lantern.getComponent(m).contentSize.y,0))},r.start=function(){this.Rope&&this.Rope.getComponent(g).on(L.BEGIN_CONTACT,this.OnRopeBeginContact,this),this.Lantern&&this.Lantern.getComponent(g).on(L.BEGIN_CONTACT,this.OnLanternBeginContact,this)},r.update=function(t){this.IsFinished||(this.IsFalling?this.node.translate(new u(0,this.FallSpeed*t*-1)):this.node.translate(new u(this.Direction*this.HorizontalSpeed*t)))},e}(y)).prototype,"LanternImages",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=e(S.prototype,"LanternBottomImages",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=e(S.prototype,"Rope",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(S.prototype,"Lantern",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(S.prototype,"LanternBottom",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"HorizontalSpeed",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 150}}),O=e(S.prototype,"FallSpeed",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),N=S))||N));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./GameInstance.ts","./Brick.ts","./Game1Select.ts","./GameMode1.ts","./Hit.ts","./Game2Select.ts","./GameMode2.ts","./Lantern.ts","./Game3Select.ts","./GameMode3.ts","./WireTile.ts","./MainMenu.ts","./SetTest.ts","./%E4%BB%A3%E7%A0%81.mjs_cjs=&original=.js","./%E6%8E%89%E4%B8%9C%E8%A5%BF%E4%BB%A3%E7%A0%81.mjs_cjs=&original=.js","./ActionPoint.ts","./ActiveStore.ts","./Billboard.ts","./BuyActionPoint.ts","./ClosePop.ts","./Coin.ts","./DeActivePopup.ts","./FloatItem.ts","./Gamble.ts","./Game2Popup.ts","./Game3Popup.ts","./Score.ts","./ScoreProgressBar.ts","./SilverHammerPopup.ts","./Store.ts","./SwitchScene.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActionPoint.ts","./GameInstance.ts"],(function(t){var e,n,a,i,o,s,c,r,l,f,P,u,p,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,c=t.Prefab,r=t.Node,l=t.instantiate,f=t.find,P=t.Vec3,u=t.Component},function(t){p=t.ActionPoint},function(t){m=t.GameInstance}],execute:function(){var b,h,G,A,y,I,F,S,d,v,U;o._RF.push({},"974bbtPHBFMU4IbQ42gkJ1w","MainMenu",void 0);var g=s.ccclass,M=s.property;t("MainMenu",(b=g("主菜单"),h=M({type:c,displayName:"一阶段快速场选择Prefab"}),G=M({type:c,displayName:"二阶段快速场选择Prefab"}),A=M({type:c,displayName:"三阶段快速场选择Prefab"}),y=M({type:r,displayName:"体力显示UI"}),b((S=e((F=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))||this).GameInstanceRef=null,a(e,"Game1SelectFastPrefab",S,i(e)),a(e,"Game2SelectFastPrefab",d,i(e)),a(e,"Game3SelectFastPrefab",v,i(e)),a(e,"UI_ActionPoint",U,i(e)),e.MaxActionPoint=15,e.ActionPoint=15,e}n(e,t);var o=e.prototype;return o.UpdateActionPointUI=function(){this.UI_ActionPoint&&this.UI_ActionPoint.getComponent(p).SetActionPointLabel(this.ActionPoint)},o.OpenGame1SelectFast=function(){if(this.Game1SelectFastPrefab){var t=l(this.Game1SelectFastPrefab);t.setParent(f("Canvas/UI")),t.setPosition(new P(0))}},o.OpenGame2SelectFast=function(){if(this.Game2SelectFastPrefab){var t=l(this.Game2SelectFastPrefab);t.setParent(f("Canvas/UI")),t.setPosition(new P(0))}},o.OpenGame3SelectFast=function(){if(this.Game3SelectFastPrefab){var t=l(this.Game3SelectFastPrefab);t.setParent(f("Canvas/UI")),t.setPosition(new P(0))}},o.LoadGame=function(){console.log("主菜单读取游戏"),this.MaxActionPoint=this.GameInstanceRef.GameData.MaxActionPoint,this.ActionPoint=this.GameInstanceRef.GameData.ActionPoint,this.UpdateActionPointUI()},o.start=function(){var t=this;this.GameInstanceRef=this.node.getComponent(m),this.UI_ActionPoint.getComponent(p).ActionPointEvent.on("NewAPSet",(function(e){t.ActionPoint=e}),this)},o.update=function(t){},e}(u)).prototype,"Game1SelectFastPrefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=e(F.prototype,"Game2SelectFastPrefab",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=e(F.prototype,"Game3SelectFastPrefab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(F.prototype,"UI_ActionPoint",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=F))||I));o._RF.pop()}}}));

System.register("chunks:///_virtual/Score.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameInstance.ts"],(function(t){var n,e,o,r,c,s;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,r=t.Label,c=t.Component},function(t){s=t.GameInstance}],execute:function(){var a;e._RF.push({},"740c3okdLNEga4nN1GyYECs","Score",void 0);var i=o.ccclass;o.property,t("Score",i("积分UI显示")(a=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.start=function(){var t=this.node.getComponent(s).GameData.Score;this.node.children[0].getComponent(r).string=String(t)},o.update=function(t){},e}(c))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/ScoreProgressBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameInstance.ts","./SilverHammerPopup.ts"],(function(e){var r,t,a,i,o,n,s,m,l,u,c,p,d,h,S,g,f;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,n=e._decorator,s=e.Node,m=e.CCInteger,l=e.Prefab,u=e.EventTarget,c=e.Label,p=e.instantiate,d=e.find,h=e.ProgressBar,S=e.Component},function(e){g=e.GameInstance},function(e){f=e.SilverHammerPopup}],execute:function(){var v,N,b,y,H,G,P,B,C,R,D,I,w,_,z,V,M;o._RF.push({},"17aacvymdREcJmt2fQBxsSu","ScoreProgressBar",void 0);var T=n.ccclass,E=n.property,L=1e3;e("ScoreProgressBar",(v=T("积分进度条"),N=E({type:s,displayName:"进度条提示Node"}),b=E({type:s,displayName:"进度条名称Node"}),y=E({type:String,displayName:"进度条的名称"}),H=E({type:m,displayName:"进度条所属阶段数(1, 2, 3)"}),G=E({type:s,displayName:"未领取的银锤子数Node"}),P=E({type:s,displayName:"红点Node"}),B=E({type:l,displayName:"领取银锤子弹窗Prefab"}),v((D=r((R=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return(r=e.call.apply(e,[this].concat(o))||this).GameInstanceRef=null,r.BarEvent=new u,r.Bar=null,a(r,"BarTipsNode",D,i(r)),a(r,"BarNameNode",I,i(r)),a(r,"BarName",w,i(r)),a(r,"GameModeNum",_,i(r)),a(r,"StoredSilverHammerNode",z,i(r)),a(r,"RedDotNode",V,i(r)),a(r,"PopupPrefab",M,i(r)),r.Score=0,r.SilverHammer=0,r.StoredSilverHammer=0,r.CurrentProgressValue=0,r}t(r,e);var o=r.prototype;return o.InitProgressBar=function(){switch(this.GameInstanceRef.LoadData(),this.GameModeNum){case 1:this.Score=this.GameInstanceRef.GameData.Game1_Score,this.SilverHammer=this.GameInstanceRef.GameData.Game1_SilverHammer;break;case 2:this.Score=this.GameInstanceRef.GameData.Game2_Score,this.SilverHammer=this.GameInstanceRef.GameData.Game2_SilverHammer;break;case 3:this.Score=this.GameInstanceRef.GameData.Game3_Score,this.SilverHammer=this.GameInstanceRef.GameData.Game3_SilverHammer}this.StoredSilverHammer=Math.floor((this.Score-this.SilverHammer*L)/L),this.StoredSilverHammerNode.getComponent(c).string=String(this.StoredSilverHammer),this.StoredSilverHammer>0?this.RedDotNode.active=!0:this.RedDotNode.active=!1,this.CurrentProgressValue=(this.Score-this.SilverHammer*L)%L,this.Bar.progress=this.CurrentProgressValue/L,this.BarTipsNode.getComponent(c).string=String(this.CurrentProgressValue)+" / "+L},o.UpdateProgressBar=function(e,r){this.StoredSilverHammer=Math.floor((e-r*L)/L),this.StoredSilverHammerNode.getComponent(c).string=String(this.StoredSilverHammer),this.StoredSilverHammer>0?this.RedDotNode.active=!0:this.RedDotNode.active=!1,this.CurrentProgressValue=(e-r*L)%L,this.Bar.progress=this.CurrentProgressValue/L,this.BarTipsNode.getComponent(c).string=String(this.CurrentProgressValue)+" / "+L},o.GetSilverHammer=function(){if(this.StoredSilverHammer>0){var e=p(this.PopupPrefab);e.getComponent(f).Init(this.StoredSilverHammer),e.setParent(d("Canvas/UI")),this.BarEvent.emit("GetSilverHammer",this.StoredSilverHammer),this.StoredSilverHammer=0,this.RedDotNode.active=!1,this.StoredSilverHammerNode.getComponent(c).string=String(0)}},o.start=function(){this.Bar=this.node.getComponent(h),this.GameInstanceRef=this.node.getComponent(g),this.BarNameNode&&(this.BarNameNode.getComponent(c).string=this.BarName),this.InitProgressBar()},o.update=function(e){},r}(S)).prototype,"BarTipsNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=r(R.prototype,"BarNameNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=r(R.prototype,"BarName",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"哈哈哈"}}),_=r(R.prototype,"GameModeNum",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=r(R.prototype,"StoredSilverHammerNode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=r(R.prototype,"RedDotNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=r(R.prototype,"PopupPrefab",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=R))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/SetTest.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"cfb2dMU7c5OXaavMs33Bx/F","SetTest",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/SilverHammerPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,o,n,i,a,u,c,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,u=e.Node,c=e.Label,l=e.Component}],execute:function(){var p,s,d,m,f;i._RF.push({},"b8a0bqpCVJO/q3Hr2bTftEZ","SilverHammerPopup",void 0);var v=a.ccclass,h=a.property;e("SilverHammerPopup",(p=v("银锤子弹窗"),s=h({type:u,displayName:"数量显示Node"}),p((f=t((m=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"NumNode",f,n(t)),t}r(t,e);var i=t.prototype;return i.Init=function(e){void 0===e&&(e=1),this.NumNode&&(this.NumNode.getComponent(c).string="+"+String(e),console.log(e))},i.start=function(){var e=this;this.scheduleOnce((function(){e.node.removeFromParent(),e.node.destroy()}),2)},i.update=function(e){},t}(l)).prototype,"NumNode",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=m))||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/Store.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,o,i,n,a,c,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,c=t.Node,l=t.Component}],execute:function(){var s,u,p,S,h,f,y;n._RF.push({},"77507dtRYlPramGgmVh058f","Store",void 0);var d=a.ccclass,v=a.property;t("Store",(s=d("商城界面"),u=v({type:c,displayName:"商店1Node"}),p=v({type:c,displayName:"商店2Node"}),s((f=e((h=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,o(e,"Store1",f,i(e)),o(e,"Store2",y,i(e)),e}r(e,t);var n=e.prototype;return n.SwitchToStore1=function(){this.Store1&&this.Store2&&(this.Store1.active=!0,this.Store2.active=!1)},n.SwitchToStore2=function(){this.Store1&&this.Store2&&(this.Store1.active=!1,this.Store2.active=!0)},n.start=function(){},n.update=function(t){},e}(l)).prototype,"Store1",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=e(h.prototype,"Store2",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=h))||S));n._RF.pop()}}}));

System.register("chunks:///_virtual/SwitchScene.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,i,c,o,a,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){c=e.cclegacy,o=e._decorator,a=e.director,u=e.Component}],execute:function(){var p,s,l,f,S;c._RF.push({},"61396B/CA5MfriC3PMd/2X9","SwitchScene",void 0);var h=o.ccclass,y=o.property;e("SwitchScene",(p=h("切换场景"),s=y({type:String,displayName:"需要打开的场景名称"}),p((S=t((f=function(e){function t(){for(var t,n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return t=e.call.apply(e,[this].concat(c))||this,r(t,"SceneName",S,i(t)),t}n(t,e);var c=t.prototype;return c.OpenScene=function(){a.loadScene(this.SceneName)},c.start=function(){},c.update=function(e){},t}(u)).prototype,"SceneName",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=f))||l));c._RF.pop()}}}));

System.register("chunks:///_virtual/WireTile.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,n,o,a,s,d,h,p,c,l,u,m,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,s=e._decorator,d=e.Node,h=e.SpriteFrame,p=e.EventTarget,c=e.Sprite,l=e.tween,u=e.Vec3,m=e.Input,g=e.Component}],execute:function(){var N,W,f,S,b,y,M,I,A,j,v;a._RF.push({},"16520Zg+dxH7aVX2AZpBbCa","WireTile",void 0);var C=s.ccclass,w=s.property;e("WireTile",(N=C("WireTile"),W=w({type:d,displayName:"Item图片Node"}),f=w({type:d,displayName:"Wire图片Node"}),S=w({type:d,displayName:"盖子图片Node"}),b=w({type:h,displayName:"Wire图片组",tooltip:"[0] 1Way\n[1] 2WayA 直线\n[2] 2WayB 拐弯\n[3] 3Way\n[4] 4Way"}),N((I=t((M=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).WireTileEvent=new p,t.IsHidden=!0,t.AdjacentMethods=[],t.CoordX=void 0,t.CoordY=void 0,r(t,"ItemSpriteNode",I,n(t)),r(t,"WireSpriteNode",A,n(t)),r(t,"LidSpriteNode",j,n(t)),r(t,"Images",v,n(t)),t}i(t,e);var a=t.prototype;return a.CalculateSetSum=function(e){for(var t,i=0,r=o(e);!(t=r()).done;){i+=t.value}return i},a.DrawWire=function(){switch(this.AdjacentMethods.length){case 0:this.WireSpriteNode.getComponent(c).spriteFrame=null;break;case 1:this.WireSpriteNode.getComponent(c).spriteFrame=this.Images[0],this.WireSpriteNode.angle=90*this.AdjacentMethods[0];break;case 2:if(2==Math.abs(this.AdjacentMethods[0]-this.AdjacentMethods[1])){this.WireSpriteNode.getComponent(c).spriteFrame=this.Images[1],Math.max(this.AdjacentMethods[0],this.AdjacentMethods[1])%2!=0&&(this.WireSpriteNode.angle=90);break}if(this.WireSpriteNode.getComponent(c).spriteFrame=this.Images[2],this.AdjacentMethods[0]*this.AdjacentMethods[1]!=0){if(3==Math.max(this.AdjacentMethods[0],this.AdjacentMethods[1])){this.WireSpriteNode.angle=180;break}this.WireSpriteNode.angle=90;break}if(3==Math.max(this.AdjacentMethods[0],this.AdjacentMethods[1])){this.WireSpriteNode.angle=270;break}break;case 3:switch(this.WireSpriteNode.getComponent(c).spriteFrame=this.Images[3],this.AdjacentMethods.reduce((function(e,t){return e+t}))){case 4:this.WireSpriteNode.angle=0;break;case 3:this.WireSpriteNode.angle=90;break;case 6:this.WireSpriteNode.angle=180;break;case 5:this.WireSpriteNode.angle=270}break;case 4:this.WireSpriteNode.getComponent(c).spriteFrame=this.Images[4]}},a.DrawItem=function(e){this.ItemSpriteNode&&(this.ItemSpriteNode.getComponent(c).spriteFrame=e)},a.RemoveLid=function(){this.IsHidden&&(this.IsHidden=!1,this.LidSpriteNode&&l(this.LidSpriteNode).to(.2,{scale:new u(.01,.01,.01)}).start())},a.HasWire=function(){return this.AdjacentMethods.length>0},a.OnMouseDown=function(){this.WireTileEvent.emit("Click",this.CoordX,this.CoordY,this.IsHidden,this.AdjacentMethods)},a.start=function(){this.node.on(m.EventType.MOUSE_DOWN,this.OnMouseDown,this)},a.update=function(e){},t}(g)).prototype,"ItemSpriteNode",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(M.prototype,"WireSpriteNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(M.prototype,"LidSpriteNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(M.prototype,"Images",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=M))||y));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});